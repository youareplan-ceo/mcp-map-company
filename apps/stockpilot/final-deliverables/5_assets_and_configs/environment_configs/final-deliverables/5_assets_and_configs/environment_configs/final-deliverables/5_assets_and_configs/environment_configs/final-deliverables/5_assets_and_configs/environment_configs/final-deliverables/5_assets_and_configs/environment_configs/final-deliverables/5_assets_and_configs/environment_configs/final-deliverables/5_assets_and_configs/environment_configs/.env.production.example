# StockPilot AI - 프로덕션 환경 변수 템플릿
# 운영 환경에서 사용할 환경 변수 설정
# 보안에 주의하여 실제 값으로 설정하세요

# =============================================================================
# 프로덕션 환경 설정 (필수)
# =============================================================================

# 애플리케이션 환경 (반드시 production으로 설정)
ENVIRONMENT=production

# 디버그 모드 (프로덕션에서는 false)
DEBUG=false

# 자동 리로드 (프로덕션에서는 false)
RELOAD=false

# 샘플 데이터 생성 (프로덕션에서는 false)
GENERATE_SAMPLE_DATA=false

# =============================================================================
# 데이터베이스 설정 (필수)
# =============================================================================

# PostgreSQL 데이터베이스 URL (SSL 필수)
# 형식: postgresql://[사용자명]:[비밀번호]@[호스트]:[포트]/[데이터베이스명]?sslmode=require
DATABASE_URL=postgresql://stockpilot_prod:CHANGE_THIS_SECURE_PASSWORD@prod-db-host:5432/stockpilot_prod_db?sslmode=require

# 데이터베이스 연결 풀 설정 (프로덕션 최적화)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_PRE_PING=true
DB_POOL_RECYCLE=3600

# =============================================================================
# Redis 캐시 설정 (필수)
# =============================================================================

# Redis 서버 URL (인증 포함)
# 형식: redis://:비밀번호@호스트:포트/db번호
REDIS_URL=redis://:CHANGE_THIS_REDIS_PASSWORD@redis-prod-host:6379/0

# Redis 연결 설정 (프로덕션 최적화)
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=10
REDIS_SOCKET_CONNECT_TIMEOUT=10

# =============================================================================
# JWT 토큰 설정 (필수 - 매우 중요)
# =============================================================================

# JWT 서명에 사용할 비밀 키 (최소 64자, 매우 강력한 키 필수)
# 생성 방법: openssl rand -hex 64
JWT_SECRET_KEY=CHANGE_THIS_TO_A_VERY_SECURE_AND_LONG_RANDOM_STRING_AT_LEAST_64_CHARS_LONG

# JWT 토큰 만료 시간 (분 단위) - 프로덕션에서는 짧게
JWT_EXPIRES_IN=480  # 8시간

# JWT 리프레시 토큰 만료 시간 (일 단위)
JWT_REFRESH_EXPIRES=7  # 7일

# =============================================================================
# API 서버 설정
# =============================================================================

# 서버 호스트 (모든 인터페이스 바인딩)
HOST=0.0.0.0

# 서버 포트
PORT=8000

# API 버전
API_VERSION=v1

# 외부 API 기본 타임아웃 (초)
API_TIMEOUT=30

# =============================================================================
# 증권 API 설정 (실거래용)
# =============================================================================

# KIS (한국투자증권) API 설정 - 실거래
KIS_APP_KEY=YOUR_PRODUCTION_KIS_APP_KEY
KIS_APP_SECRET=YOUR_PRODUCTION_KIS_APP_SECRET
KIS_BASE_URL=https://openapi.koreainvestment.com:9443

# 실거래 모드 (프로덕션에서는 false)
KIS_MOCK_TRADING=false

# KRX (한국거래소) API 설정
KRX_API_KEY=YOUR_PRODUCTION_KRX_API_KEY

# =============================================================================
# AI 모델 설정 (필수)
# =============================================================================

# OpenAI API 설정 (실제 키 필요 - 최우선)
OPENAI_API_KEY=YOUR_PRODUCTION_OPENAI_API_KEY
OPENAI_API_KEY_2=YOUR_BACKUP_OPENAI_API_KEY_2
OPENAI_API_KEY_3=YOUR_BACKUP_OPENAI_API_KEY_3

# OpenAI 모델 설정
OPENAI_DEFAULT_MODEL=gpt-3.5-turbo
OPENAI_PREMIUM_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.7

# OpenAI 비용 제한 (중요)
OPENAI_DAILY_COST_LIMIT=50.0
OPENAI_MONTHLY_COST_LIMIT=500.0
OPENAI_HOURLY_REQUEST_LIMIT=500

# API 키 로테이션 설정
OPENAI_KEY_ROTATION_ENABLED=true
OPENAI_KEY_ROTATION_INTERVAL=24

# HuggingFace API 설정
HUGGINGFACE_API_KEY=YOUR_PRODUCTION_HUGGINGFACE_API_KEY

# 추가 AI 서비스
CLAUDE_API_KEY=YOUR_PRODUCTION_CLAUDE_API_KEY
GEMINI_API_KEY=YOUR_PRODUCTION_GEMINI_API_KEY

# =============================================================================
# 보안 설정 (매우 중요)
# =============================================================================

# CORS 허용 도메인 (실제 도메인만 허용)
CORS_ORIGINS=https://app.stockpilot.ai,https://www.stockpilot.ai

# 허용할 HTTP 메소드
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS

# 허용할 헤더
CORS_HEADERS=Content-Type,Authorization,X-API-Key

# 쿠키 보안 설정 (HTTPS 환경에서는 true)
SECURE_COOKIES=true

# API 키 인증 헤더명
API_KEY_HEADER=X-API-Key

# =============================================================================
# SSL/TLS 설정
# =============================================================================

# SSL 인증서 파일 경로
SSL_CERT_FILE=/etc/ssl/certs/stockpilot.crt
SSL_KEY_FILE=/etc/ssl/private/stockpilot.key

# SSL 리다이렉트 강제
FORCE_HTTPS=true

# =============================================================================
# 로깅 설정 (프로덕션)
# =============================================================================

# 로그 레벨 (프로덕션에서는 INFO 또는 WARNING)
LOG_LEVEL=INFO

# 로그 파일 경로
LOG_FILE=/var/log/stockpilot/app.log

# 로그 파일 최대 크기 (MB)
LOG_MAX_SIZE=500

# 로그 파일 백업 개수
LOG_BACKUP_COUNT=10

# 구조화된 로그 형식 사용 (프로덕션에서는 true 권장)
LOG_JSON_FORMAT=true

# =============================================================================
# 성능 설정 (프로덕션 최적화)
# =============================================================================

# API 요청 제한 (분당 요청 수) - 더 제한적으로
RATE_LIMIT_PER_MINUTE=500

# 데이터 캐시 TTL (초)
CACHE_TTL=300

# 주식 데이터 업데이트 간격 (초)
STOCK_DATA_REFRESH_INTERVAL=30

# WebSocket 연결 타임아웃 (초)
WEBSOCKET_TIMEOUT=300

# 최대 동시 사용자 수
MAX_CONCURRENT_USERS=5000

# 워커 프로세스 수 (CPU 코어 수 기준)
WORKER_PROCESSES=4

# =============================================================================
# 모니터링 설정 (필수)
# =============================================================================

# Prometheus 메트릭 수집
METRICS_ENABLED=true
METRICS_PORT=9090

# Sentry 오류 추적 (필수)
SENTRY_ENABLED=true
SENTRY_DSN=YOUR_PRODUCTION_SENTRY_DSN

# 헬스체크 설정
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# 알림 설정 (프로덕션)
# =============================================================================

# 이메일 알림 설정 (필수)
EMAIL_ENABLED=true
SMTP_SERVER=smtp.your-domain.com
SMTP_PORT=587
SMTP_USERNAME=noreply@stockpilot.ai
SMTP_PASSWORD=YOUR_SMTP_PASSWORD
EMAIL_FROM=noreply@stockpilot.ai

# Slack 알림 설정 (운영팀용)
SLACK_ENABLED=true
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/PRODUCTION/WEBHOOK

# Telegram 봇 설정 (선택사항)
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=YOUR_PRODUCTION_TELEGRAM_BOT_TOKEN
TELEGRAM_CHAT_ID=YOUR_PRODUCTION_TELEGRAM_CHAT_ID

# =============================================================================
# 백업 및 복구 설정 (필수)
# =============================================================================

# 자동 백업 활성화
AUTO_BACKUP_ENABLED=true

# 백업 간격 (시간) - 프로덕션에서는 더 자주
BACKUP_INTERVAL=6

# 백업 저장 경로
BACKUP_PATH=/var/backups/stockpilot

# 백업 파일 보관 일수
BACKUP_RETENTION_DAYS=90

# S3 백업 설정 (필수)
S3_BACKUP_ENABLED=true
S3_BUCKET=stockpilot-production-backups
S3_ACCESS_KEY=YOUR_S3_ACCESS_KEY
S3_SECRET_KEY=YOUR_S3_SECRET_KEY
S3_REGION=ap-northeast-2

# =============================================================================
# 데이터베이스 백업 설정
# =============================================================================

# 데이터베이스 백업 스케줄 (cron 형식)
DB_BACKUP_SCHEDULE=0 2 * * *  # 매일 새벽 2시

# 백업 압축 활성화
DB_BACKUP_COMPRESS=true

# 백업 암호화 활성화
DB_BACKUP_ENCRYPT=true

# 백업 암호화 키
DB_BACKUP_ENCRYPT_KEY=YOUR_BACKUP_ENCRYPTION_KEY

# =============================================================================
# 로드밸런싱 및 클러스터링
# =============================================================================

# 클러스터 모드 활성화
CLUSTER_MODE=true

# 노드 ID
NODE_ID=production-node-1

# 클러스터 노드 목록
CLUSTER_NODES=node1.stockpilot.ai,node2.stockpilot.ai,node3.stockpilot.ai

# =============================================================================
# CDN 및 정적 파일 설정
# =============================================================================

# CDN URL
CDN_URL=https://cdn.stockpilot.ai

# 정적 파일 서빙
STATIC_FILES_ENABLED=false

# 미디어 파일 업로드 경로
MEDIA_ROOT=/var/stockpilot/media

# =============================================================================
# 보안 강화 설정
# =============================================================================

# 보안 헤더 활성화
SECURITY_HEADERS_ENABLED=true

# HSTS 활성화 (HTTPS 강제)
HSTS_ENABLED=true

# CSP (Content Security Policy) 활성화
CSP_ENABLED=true

# XSS 보호 활성화
XSS_PROTECTION=true

# 클릭재킹 보호 활성화
CLICKJACKING_PROTECTION=true

# =============================================================================
# API 게이트웨이 설정
# =============================================================================

# API 게이트웨이 URL
API_GATEWAY_URL=https://api.stockpilot.ai

# API 버전 관리
API_VERSION_HEADER=X-API-Version

# =============================================================================
# 추가 프로덕션 설정
# =============================================================================

# 타임존 설정
TIMEZONE=Asia/Seoul

# 기본 언어 설정
DEFAULT_LANGUAGE=ko

# 데이터 동기화 간격 (초) - 프로덕션에서는 더 짧게
DATA_SYNC_INTERVAL=60

# 시스템 유지보수 모드
MAINTENANCE_MODE=false

# 기능 플래그 (프로덕션)
FEATURE_REALTIME_TRADING=true
FEATURE_AI_RECOMMENDATIONS=true
FEATURE_SOCIAL_FEATURES=true
FEATURE_ADVANCED_ANALYTICS=true

# 성능 프로파일링 (프로덕션에서는 비활성화)
PROFILING_ENABLED=false

# 메모리 사용량 모니터링
MEMORY_MONITORING=true

# 네트워크 설정
NETWORK_TIMEOUT=30
CONNECTION_POOL_SIZE=100

# 캐시 설정 최적화
CACHE_BACKEND=redis
CACHE_CLUSTER_ENABLED=true